@if (pokemon() === null) {
  <div class="flex justify-center mt-10">
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold animate-bounce">
      Cargando Pokémon...
    </h1>
  </div>
} @else {
  <section class="min-h-screen  text-white flex flex-col items-center py-10 px-4">

    <!-- Título con Pokéball decorativa -->
    <div class="flex items-center gap-3 mb-6">
      <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" 
           alt="Pokeball" class="w-8 h-8 sm:w-10 sm:h-10 animate-spin-slow">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold capitalize drop-shadow-lg">
        {{ pokemon()!.name }}
      </h1>
    </div>

    <!-- Layout responsivo: Imagen + Info -->
    <div class="flex flex-col lg:flex-row items-center lg:items-start lg:justify-center gap-10 w-full max-w-6xl">

      <!-- Imagen principal -->
      <div class="flex justify-center lg:w-1/2">
        <img 
          class="w-48 h-48 sm:w-60 sm:h-60 md:w-72 md:h-72 object-contain drop-shadow-2xl animate-fadeIn transition-transform duration-300 hover:rotate-3"
          [src]="pokemon()!.sprites.other?.['official-artwork']?.front_default"
          [alt]="pokemon()!.name"
        />
      </div>

      <!-- Info y Stats -->
      <div class="flex flex-col items-center lg:items-start gap-6 lg:w-1/2">

        <!-- Tipos -->
        <div class="flex flex-wrap justify-center lg:justify-start gap-3">
          @for (type of pokemon()!.types; track type.type.name) {
            <span 
              class="px-4 py-1 rounded-full text-xs sm:text-sm font-semibold capitalize shadow-md animate-pulse"
              [ngClass]="{
                'bg-yellow-400 text-black': type.type.name === 'electric',
                'bg-blue-500': type.type.name === 'water',
                'bg-green-500': type.type.name === 'grass',
                'bg-red-500': type.type.name === 'fire',
                'bg-gray-500': type.type.name === 'normal',
                'bg-purple-500': type.type.name === 'poison',
                'bg-pink-500': type.type.name === 'fairy',
                'bg-orange-500': type.type.name === 'fighting',
                'bg-teal-500': type.type.name === 'bug',
                'bg-indigo-400': type.type.name === 'psychic',
                'bg-lime-500': type.type.name === 'dragon',
                'bg-slate-400': type.type.name === 'rock',
                'bg-stone-600': type.type.name === 'ground'
              }"
            >
              {{ type.type.name }}
            </span>
          }
        </div>

        

        <!-- Info básica -->
        <div class="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-6 shadow-lg w-full max-w-sm text-center lg:text-left animate-slideUp transform transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:from-indigo-500 hover:to-blue-600">
          <p><strong>Altura:</strong> {{ (pokemon()!.height ?? 0) / 10 }} m</p>
          <p><strong>Peso:</strong> {{ (pokemon()!.weight ?? 0) / 10 }} kg</p>
          <p><strong>Experiencia base:</strong> {{ pokemon()!.base_experience }}</p>
        </div>

        <!-- Estadísticas -->
        <div class="w-full max-w-md bg-white/10 rounded-2xl p-6 shadow-lg animate-fadeIn transform transition-all duration-300 hover:scale-105 hover:shadow-2xl">
          <h2 class="text-xl sm:text-2xl font-bold mb-4 text-center lg:text-left">Estadísticas</h2>
          @for (stat of pokemon()!.stats; track stat.stat.name) {
            <div class="mb-3">
              <div class="flex justify-between text-xs sm:text-sm">
                <span class="capitalize">{{ stat.stat.name }}</span>
                <span>{{ stat.base_stat }}</span>
              </div>
              <div class="w-full bg-gray-300 rounded-full h-2 sm:h-3 overflow-hidden">
                <div 
                  class="h-2 sm:h-3 rounded-full transition-all duration-500"
                  [ngStyle]="{ 
                    'width': stat.base_stat + '%',
                    'background': stat.stat.name === 'hp' ? '#f87171' :
                                  stat.stat.name === 'attack' ? '#facc15' :
                                  stat.stat.name === 'defense' ? '#60a5fa' :
                                  stat.stat.name === 'speed' ? '#34d399' :
                                  '#a78bfa'
                  }"
                ></div>
              </div>
            </div>
          }
        </div>

        <!-- audio -->

        @if (pokemon()!.cries.latest) {
          <audio controls class="my-5">
            <source [src]="pokemon()!.cries.latest" type="audio/wav">
          </audio>
        }

      </div>
    </div>
  </section>
}
